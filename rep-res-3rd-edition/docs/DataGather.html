<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Gathering Data with R | Reproducible Research with R and RStudio (Third Edition)</title>
  <meta name="description" content="Chapter 6 Gathering Data with R | Reproducible Research with R and RStudio (Third Edition) brings together the skills and tools needed for doing and presenting computational research. Using straightforward examples, the book takes you through an entire reproducible research workflow. This practical workflow enables you to gather and analyze data as well as dynamically present results in print and on the web." />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Gathering Data with R | Reproducible Research with R and RStudio (Third Edition)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Chapter 6 Gathering Data with R | Reproducible Research with R and RStudio (Third Edition) brings together the skills and tools needed for doing and presenting computational research. Using straightforward examples, the book takes you through an entire reproducible research workflow. This practical workflow enables you to gather and analyze data as well as dynamically present results in print and on the web." />
  <meta name="github-repo" content="christophergandrud/Rep-Res-Book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Gathering Data with R | Reproducible Research with R and RStudio (Third Edition)" />
  
  <meta name="twitter:description" content="Chapter 6 Gathering Data with R | Reproducible Research with R and RStudio (Third Edition) brings together the skills and tools needed for doing and presenting computational research. Using straightforward examples, the book takes you through an entire reproducible research workflow. This practical workflow enables you to gather and analyze data as well as dynamically present results in print and on the web." />
  

<meta name="author" content="Christopher Gandrud" />


<meta name="date" content="2025-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Storing.html"/>
<link rel="next" href="DataClean.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i>Motivation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#changes-to-the-third-edition"><i class="fa fa-check"></i>Changes to the Third Edition</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#changes-to-the-second-edition"><i class="fa fa-check"></i>Changes to the Second Edition</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="" data-path="stylistic-conventions.html"><a href="stylistic-conventions.html"><i class="fa fa-check"></i>Stylistic Conventions</a></li>
<li class="chapter" data-level="" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i>Additional Resources</a>
<ul>
<li class="chapter" data-level="" data-path="additional-resources.html"><a href="additional-resources.html#chapter-examples"><i class="fa fa-check"></i>Chapter Examples</a></li>
<li class="chapter" data-level="" data-path="additional-resources.html"><a href="additional-resources.html#short-example-project"><i class="fa fa-check"></i>Short Example Project</a></li>
<li class="chapter" data-level="" data-path="additional-resources.html"><a href="additional-resources.html#updates"><i class="fa fa-check"></i>Updates</a></li>
<li class="chapter" data-level="" data-path="additional-resources.html"><a href="additional-resources.html#corrections"><i class="fa fa-check"></i>Corrections</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started</b></span></li>
<li class="chapter" data-level="1" data-path="Intro.html"><a href="Intro.html"><i class="fa fa-check"></i><b>1</b> Introducing Reproducible Research</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Intro.html"><a href="Intro.html#what-is-reproducible-research"><i class="fa fa-check"></i><b>1.1</b> What Is Reproducible Research?</a></li>
<li class="chapter" data-level="1.2" data-path="Intro.html"><a href="Intro.html#why-should-research-be-reproducible"><i class="fa fa-check"></i><b>1.2</b> Why Should Research Be Reproducible?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="Intro.html"><a href="Intro.html#for-science"><i class="fa fa-check"></i><b>1.2.1</b> For science</a></li>
<li class="chapter" data-level="1.2.2" data-path="Intro.html"><a href="Intro.html#for-you"><i class="fa fa-check"></i><b>1.2.2</b> For you</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="Intro.html"><a href="Intro.html#who-should-read-this-book"><i class="fa fa-check"></i><b>1.3</b> Who Should Read This Book?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="Intro.html"><a href="Intro.html#academic-researchers"><i class="fa fa-check"></i><b>1.3.1</b> Academic researchers</a></li>
<li class="chapter" data-level="1.3.2" data-path="Intro.html"><a href="Intro.html#students"><i class="fa fa-check"></i><b>1.3.2</b> Students</a></li>
<li class="chapter" data-level="1.3.3" data-path="Intro.html"><a href="Intro.html#instructors"><i class="fa fa-check"></i><b>1.3.3</b> Instructors</a></li>
<li class="chapter" data-level="1.3.4" data-path="Intro.html"><a href="Intro.html#editors"><i class="fa fa-check"></i><b>1.3.4</b> Editors</a></li>
<li class="chapter" data-level="1.3.5" data-path="Intro.html"><a href="Intro.html#private-sector-researchers"><i class="fa fa-check"></i><b>1.3.5</b> Private sector researchers</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="Intro.html"><a href="Intro.html#the-tools-of-reproducible-research"><i class="fa fa-check"></i><b>1.4</b> The Tools of Reproducible Research</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="Intro.html"><a href="Intro.html#why-use-r-knitrr-markdown-and-rstudio-for-reproducible-research"><i class="fa fa-check"></i><b>1.4.1</b> Why Use R, knitr/R Markdown, and RStudio for Reproducible Research?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="Intro.html"><a href="Intro.html#InstallR"><i class="fa fa-check"></i><b>1.5</b> Installing the main software</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="Intro.html"><a href="Intro.html#InstallMarkup"><i class="fa fa-check"></i><b>1.5.1</b> Installing markup languages</a></li>
<li class="chapter" data-level="1.5.2" data-path="Intro.html"><a href="Intro.html#InstallMake"><i class="fa fa-check"></i><b>1.5.2</b> GNU Make</a></li>
<li class="chapter" data-level="1.5.3" data-path="Intro.html"><a href="Intro.html#other-tools"><i class="fa fa-check"></i><b>1.5.3</b> Other tools</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="Intro.html"><a href="Intro.html#OtherBooks"><i class="fa fa-check"></i><b>1.6</b> Book Overview</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="Intro.html"><a href="Intro.html#how-to-read-this-book"><i class="fa fa-check"></i><b>1.6.1</b> How to read this book</a></li>
<li class="chapter" data-level="1.6.2" data-path="Intro.html"><a href="Intro.html#reproduce-this-book"><i class="fa fa-check"></i><b>1.6.2</b> Reproduce this book</a></li>
<li class="chapter" data-level="1.6.3" data-path="Intro.html"><a href="Intro.html#contents-overview"><i class="fa fa-check"></i><b>1.6.3</b> Contents overview</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="Intro.html"><a href="Intro.html#appendix-additional-r-setup"><i class="fa fa-check"></i>Appendix: Additional R Setup</a>
<ul>
<li class="chapter" data-level="" data-path="Intro.html"><a href="Intro.html#r-packages"><i class="fa fa-check"></i>R Packages</a></li>
<li class="chapter" data-level="" data-path="Intro.html"><a href="Intro.html#special-issues"><i class="fa fa-check"></i>Special issues</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html"><i class="fa fa-check"></i><b>2</b> Getting Started with Reproducible Research</a>
<ul>
<li class="chapter" data-level="2.1" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#the-big-picture-a-workflow-for-reproducible-research"><i class="fa fa-check"></i><b>2.1</b> The Big Picture: A Workflow for Reproducible Research</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#reproducible-theory"><i class="fa fa-check"></i><b>2.1.1</b> Reproducible theory</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#practical-tips-for-reproducible-research"><i class="fa fa-check"></i><b>2.2</b> Practical Tips for Reproducible Research</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#document-everything"><i class="fa fa-check"></i><b>2.2.1</b> Document everything!</a></li>
<li class="chapter" data-level="2.2.2" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#everything-is-a-text-file"><i class="fa fa-check"></i><b>2.2.2</b> Everything is a (text) file</a></li>
<li class="chapter" data-level="2.2.3" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#all-files-should-be-human-readable"><i class="fa fa-check"></i><b>2.2.3</b> All files should be human readable</a></li>
<li class="chapter" data-level="2.2.4" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#explicitly-tie-your-files-together"><i class="fa fa-check"></i><b>2.2.4</b> Explicitly tie your files together</a></li>
<li class="chapter" data-level="2.2.5" data-path="GettingStartedRR.html"><a href="GettingStartedRR.html#have-a-plan-to-organize-store-and-make-your-files-available"><i class="fa fa-check"></i><b>2.2.5</b> Have a plan to organize, store, and make your files available</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html"><i class="fa fa-check"></i><b>3</b> Getting Started with R, RStudio, and knitr/R Markdown</a>
<ul>
<li class="chapter" data-level="3.1" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#using-r-the-basics"><i class="fa fa-check"></i><b>3.1</b> Using R: The Basics</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#Objects"><i class="fa fa-check"></i><b>3.1.1</b> Objects</a></li>
<li class="chapter" data-level="3.1.2" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#FunctionsCommands"><i class="fa fa-check"></i><b>3.1.2</b> Functions</a></li>
<li class="chapter" data-level="3.1.3" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#RSave"><i class="fa fa-check"></i><b>3.1.3</b> The workspace and history</a></li>
<li class="chapter" data-level="3.1.4" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#RHistory"><i class="fa fa-check"></i><b>3.1.4</b> R history</a></li>
<li class="chapter" data-level="3.1.5" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#ROptions"><i class="fa fa-check"></i><b>3.1.5</b> Global R options</a></li>
<li class="chapter" data-level="3.1.6" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#Packages"><i class="fa fa-check"></i><b>3.1.6</b> Installing new packages and loading functions</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#using-rstudio"><i class="fa fa-check"></i><b>3.2</b> Using RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#using-knitr-and-r-markdown-the-basics"><i class="fa fa-check"></i><b>3.3</b> Using knitr and R Markdown: The Basics</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#what-knitr-does"><i class="fa fa-check"></i><b>3.3.1</b> What <em>knitr</em> does</a></li>
<li class="chapter" data-level="3.3.2" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#rmardownHeader"><i class="fa fa-check"></i><b>3.3.2</b> What <em>rmarkdown</em> does</a></li>
<li class="chapter" data-level="3.3.3" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#file-extensions"><i class="fa fa-check"></i><b>3.3.3</b> File extensions</a></li>
<li class="chapter" data-level="3.3.4" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#code-chunks"><i class="fa fa-check"></i><b>3.3.4</b> Code chunks</a></li>
<li class="chapter" data-level="3.3.5" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#GlobalChunkOptions"><i class="fa fa-check"></i><b>3.3.5</b> Global chunk options</a></li>
<li class="chapter" data-level="3.3.6" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#knitr-package-options"><i class="fa fa-check"></i><b>3.3.6</b> <em>knitr</em> package options</a></li>
<li class="chapter" data-level="3.3.7" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#hooks"><i class="fa fa-check"></i><b>3.3.7</b> Hooks</a></li>
<li class="chapter" data-level="3.3.8" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#knitr-r-markdown-and-rstudio"><i class="fa fa-check"></i><b>3.3.8</b> knitr, R Markdown, and RStudio</a></li>
<li class="chapter" data-level="3.3.9" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#knitr-and-r"><i class="fa fa-check"></i><b>3.3.9</b> knitr and R</a></li>
<li class="chapter" data-level="3.3.10" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#rmarkdownRender"><i class="fa fa-check"></i><b>3.3.10</b> R Markdown and R</a></li>
<li class="chapter" data-level="" data-path="GettingStartedRKnitr.html"><a href="GettingStartedRKnitr.html#chapter-summary"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="jupyter.html"><a href="jupyter.html"><i class="fa fa-check"></i>Appendix: Jupyter Interactive Notebooks</a></li>
<li class="chapter" data-level="" data-path="LyxAppendix.html"><a href="LyxAppendix.html"><i class="fa fa-check"></i>Appendix: knitr and Lyx</a></li>
<li class="chapter" data-level="4" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html"><i class="fa fa-check"></i><b>4</b> Getting Started with File Management</a>
<ul>
<li class="chapter" data-level="4.1" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#file-paths-and-naming-conventions"><i class="fa fa-check"></i><b>4.1</b> File Paths and Naming Conventions</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#root-directories"><i class="fa fa-check"></i><b>4.1.1</b> Root directories</a></li>
<li class="chapter" data-level="4.1.2" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#sub-directories-and-parent-directories"><i class="fa fa-check"></i><b>4.1.2</b> Sub-directories and parent directories</a></li>
<li class="chapter" data-level="4.1.3" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#working-directories"><i class="fa fa-check"></i><b>4.1.3</b> Working directories</a></li>
<li class="chapter" data-level="4.1.4" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#absolute-vs.-relative-paths"><i class="fa fa-check"></i><b>4.1.4</b> Absolute vs. relative paths</a></li>
<li class="chapter" data-level="4.1.5" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#spaces-in-directory-and-file-names"><i class="fa fa-check"></i><b>4.1.5</b> Spaces in directory and file names</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#organizing-your-research-project"><i class="fa fa-check"></i><b>4.2</b> Organizing Your Research Project</a></li>
<li class="chapter" data-level="4.3" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#CreateRStudioProject"><i class="fa fa-check"></i><b>4.3</b> Organizing Research with RStudio Projects</a></li>
<li class="chapter" data-level="4.4" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#r-file-manipulation-functions"><i class="fa fa-check"></i><b>4.4</b> R File Manipulation Functions</a></li>
<li class="chapter" data-level="4.5" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#unix-like-shell-commands-for-file-management"><i class="fa fa-check"></i><b>4.5</b> Unix-like Shell Commands for File Management</a></li>
<li class="chapter" data-level="4.6" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#file-navigation-in-rstudio"><i class="fa fa-check"></i><b>4.6</b> File Navigation in RStudio</a>
<ul>
<li class="chapter" data-level="" data-path="DirectoriesChapter.html"><a href="DirectoriesChapter.html#chapter-summary-1"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Gathering and Storage</b></span></li>
<li class="chapter" data-level="5" data-path="Storing.html"><a href="Storing.html"><i class="fa fa-check"></i><b>5</b> Storing, Collaborating, Accessing Files, and Versioning</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Storing.html"><a href="Storing.html#TSVEscape"><i class="fa fa-check"></i><b>5.1</b> Saving Data in Reproducible Formats</a></li>
<li class="chapter" data-level="5.2" data-path="Storing.html"><a href="Storing.html#storing-your-files-in-the-cloud-dropbox"><i class="fa fa-check"></i><b>5.2</b> Storing Your Files in the Cloud: Dropbox</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="Storing.html"><a href="Storing.html#storage"><i class="fa fa-check"></i><b>5.2.1</b> Storage</a></li>
<li class="chapter" data-level="5.2.2" data-path="Storing.html"><a href="Storing.html#EnablePublicFolder"><i class="fa fa-check"></i><b>5.2.2</b> Accessing data</a></li>
<li class="chapter" data-level="5.2.3" data-path="Storing.html"><a href="Storing.html#collaboration"><i class="fa fa-check"></i><b>5.2.3</b> Collaboration</a></li>
<li class="chapter" data-level="5.2.4" data-path="Storing.html"><a href="Storing.html#version-control"><i class="fa fa-check"></i><b>5.2.4</b> Version control</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Storing.html"><a href="Storing.html#GitHubMain"><i class="fa fa-check"></i><b>5.3</b> Storing Your Files in the Cloud: GitHub</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="Storing.html"><a href="Storing.html#setting-up-github-basic"><i class="fa fa-check"></i><b>5.3.1</b> Setting up GitHub: Basic</a></li>
<li class="chapter" data-level="5.3.2" data-path="Storing.html"><a href="Storing.html#version-control-with-git"><i class="fa fa-check"></i><b>5.3.2</b> Version control with Git</a></li>
<li class="chapter" data-level="5.3.3" data-path="Storing.html"><a href="Storing.html#NewGitHubRepo"><i class="fa fa-check"></i><b>5.3.3</b> Remote storage on GitHub</a></li>
<li class="chapter" data-level="5.3.4" data-path="Storing.html"><a href="Storing.html#accessing-on-github"><i class="fa fa-check"></i><b>5.3.4</b> Accessing on GitHub</a></li>
<li class="chapter" data-level="5.3.5" data-path="Storing.html"><a href="Storing.html#summing-up-the-github-workflow"><i class="fa fa-check"></i><b>5.3.5</b> Summing up the GitHub workflow</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="Storing.html"><a href="Storing.html#rstudio-and-github"><i class="fa fa-check"></i><b>5.4</b> RStudio and GitHub</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="Storing.html"><a href="Storing.html#setting-up-gitgithub-with-projects"><i class="fa fa-check"></i><b>5.4.1</b> Setting up Git/GitHub with Projects</a></li>
<li class="chapter" data-level="5.4.2" data-path="Storing.html"><a href="Storing.html#using-git-in-rstudio-projects"><i class="fa fa-check"></i><b>5.4.2</b> Using Git in RStudio Projects</a></li>
<li class="chapter" data-level="" data-path="Storing.html"><a href="Storing.html#chapter-summary-2"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="DataGather.html"><a href="DataGather.html"><i class="fa fa-check"></i><b>6</b> Gathering Data with R</a>
<ul>
<li class="chapter" data-level="6.1" data-path="DataGather.html"><a href="DataGather.html#organize-your-data-gathering-makefiles"><i class="fa fa-check"></i><b>6.1</b> Organize Your Data Gathering: Makefiles</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="DataGather.html"><a href="DataGather.html#r-make-like-files"><i class="fa fa-check"></i><b>6.1.1</b> R Make-like files</a></li>
<li class="chapter" data-level="6.1.2" data-path="DataGather.html"><a href="DataGather.html#gnu-make"><i class="fa fa-check"></i><b>6.1.2</b> GNU Make</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="DataGather.html"><a href="DataGather.html#importing-locally-stored-data-sets"><i class="fa fa-check"></i><b>6.2</b> Importing Locally Stored Data Sets</a></li>
<li class="chapter" data-level="6.3" data-path="DataGather.html"><a href="DataGather.html#importing-data-sets-from-the-internet"><i class="fa fa-check"></i><b>6.3</b> Importing Data Sets from the Internet</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="DataGather.html"><a href="DataGather.html#data-from-non-secure-http-urls"><i class="fa fa-check"></i><b>6.3.1</b> Data from non-secure (<em>http</em>) URLs</a></li>
<li class="chapter" data-level="6.3.2" data-path="DataGather.html"><a href="DataGather.html#SecureDataDownload"><i class="fa fa-check"></i><b>6.3.2</b> Data from secure (<em>https</em>) URLs</a></li>
<li class="chapter" data-level="6.3.3" data-path="DataGather.html"><a href="DataGather.html#compressed-data-stored-online"><i class="fa fa-check"></i><b>6.3.3</b> Compressed data stored online</a></li>
<li class="chapter" data-level="6.3.4" data-path="DataGather.html"><a href="DataGather.html#data-apis-and-feeds"><i class="fa fa-check"></i><b>6.3.4</b> Data APIs and feeds</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="DataGather.html"><a href="DataGather.html#advanced-automatic-data-gathering-web-scraping"><i class="fa fa-check"></i><b>6.4</b> Advanced Automatic Data Gathering: Web Scraping</a>
<ul>
<li class="chapter" data-level="" data-path="DataGather.html"><a href="DataGather.html#chapter-summary-3"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="DataClean.html"><a href="DataClean.html"><i class="fa fa-check"></i><b>7</b> Preparing Data for Analysis</a>
<ul>
<li class="chapter" data-level="7.1" data-path="DataClean.html"><a href="DataClean.html#cleaning-data-for-merging"><i class="fa fa-check"></i><b>7.1</b> Cleaning Data for Merging</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="DataClean.html"><a href="DataClean.html#get-a-handle-on-your-data"><i class="fa fa-check"></i><b>7.1.1</b> Get a handle on your data</a></li>
<li class="chapter" data-level="" data-path="DataClean.html"><a href="DataClean.html#tibbles"><i class="fa fa-check"></i>Tibbles</a></li>
<li class="chapter" data-level="7.1.2" data-path="DataClean.html"><a href="DataClean.html#GatherReshape"><i class="fa fa-check"></i><b>7.1.2</b> Reshaping data</a></li>
<li class="chapter" data-level="7.1.3" data-path="DataClean.html"><a href="DataClean.html#renaming-variables"><i class="fa fa-check"></i><b>7.1.3</b> Renaming variables</a></li>
<li class="chapter" data-level="7.1.4" data-path="DataClean.html"><a href="DataClean.html#ordering-data"><i class="fa fa-check"></i><b>7.1.4</b> Ordering data</a></li>
<li class="chapter" data-level="7.1.5" data-path="DataClean.html"><a href="DataClean.html#subsetting-data"><i class="fa fa-check"></i><b>7.1.5</b> Subsetting data</a></li>
<li class="chapter" data-level="7.1.6" data-path="DataClean.html"><a href="DataClean.html#recoding-stringnumeric-variables"><i class="fa fa-check"></i><b>7.1.6</b> Recoding string/numeric variables</a></li>
<li class="chapter" data-level="7.1.7" data-path="DataClean.html"><a href="DataClean.html#creating-new-variables-from-old"><i class="fa fa-check"></i><b>7.1.7</b> Creating new variables from old</a></li>
<li class="chapter" data-level="7.1.8" data-path="DataClean.html"><a href="DataClean.html#changing-variable-types"><i class="fa fa-check"></i><b>7.1.8</b> Changing variable types</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="DataClean.html"><a href="DataClean.html#merging-data-sets"><i class="fa fa-check"></i><b>7.2</b> Merging Data Sets</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="DataClean.html"><a href="DataClean.html#binding"><i class="fa fa-check"></i><b>7.2.1</b> Binding</a></li>
<li class="chapter" data-level="7.2.2" data-path="DataClean.html"><a href="DataClean.html#merging-data-frames"><i class="fa fa-check"></i><b>7.2.2</b> Merging data frames</a></li>
<li class="chapter" data-level="" data-path="DataClean.html"><a href="DataClean.html#bigger-data"><i class="fa fa-check"></i>Bigger data</a></li>
<li class="chapter" data-level="" data-path="DataClean.html"><a href="DataClean.html#duplicate-values"><i class="fa fa-check"></i>Duplicate values</a></li>
<li class="chapter" data-level="7.2.3" data-path="DataClean.html"><a href="DataClean.html#duplicate-columns"><i class="fa fa-check"></i><b>7.2.3</b> Duplicate columns</a></li>
<li class="chapter" data-level="" data-path="DataClean.html"><a href="DataClean.html#chapter-summary-4"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a></li>
<li class="part"><span><b>III Analysis and Results</b></span></li>
<li class="chapter" data-level="8" data-path="StatsModel.html"><a href="StatsModel.html"><i class="fa fa-check"></i><b>8</b> Statistical Modeling and knitr/R Markdown</a>
<ul>
<li class="chapter" data-level="8.1" data-path="StatsModel.html"><a href="StatsModel.html#incorporating-analyses-into-the-markup"><i class="fa fa-check"></i><b>8.1</b> Incorporating Analyses into the Markup</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="StatsModel.html"><a href="StatsModel.html#full-code-chunks"><i class="fa fa-check"></i><b>8.1.1</b> Full code chunks</a></li>
<li class="chapter" data-level="8.1.2" data-path="StatsModel.html"><a href="StatsModel.html#showing-code-and-results-inline"><i class="fa fa-check"></i><b>8.1.2</b> Showing code and results inline</a></li>
<li class="chapter" data-level="8.1.3" data-path="StatsModel.html"><a href="StatsModel.html#dynamically-including-non-r-code-in-code-chunks"><i class="fa fa-check"></i><b>8.1.3</b> Dynamically including non-R code in code chunks</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="StatsModel.html"><a href="StatsModel.html#dynamically-including-modular-analysis-files"><i class="fa fa-check"></i><b>8.2</b> Dynamically Including Modular Analysis Files</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="StatsModel.html"><a href="StatsModel.html#source-from-a-local-file"><i class="fa fa-check"></i><b>8.2.1</b> Source from a local file</a></li>
<li class="chapter" data-level="8.2.2" data-path="StatsModel.html"><a href="StatsModel.html#SourceSecureURL"><i class="fa fa-check"></i><b>8.2.2</b> Source from a URL</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="StatsModel.html"><a href="StatsModel.html#reproducibly-random-set.seed"><i class="fa fa-check"></i><b>8.3</b> Reproducibly Random: <code>set.seed()</code></a></li>
<li class="chapter" data-level="8.4" data-path="StatsModel.html"><a href="StatsModel.html#computationally-intensive-analyses"><i class="fa fa-check"></i><b>8.4</b> Computationally Intensive Analyses</a>
<ul>
<li class="chapter" data-level="" data-path="StatsModel.html"><a href="StatsModel.html#chapter-summary-5"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="TablesChapter.html"><a href="TablesChapter.html"><i class="fa fa-check"></i><b>9</b> Showing Results with Tables</a>
<ul>
<li class="chapter" data-level="9.1" data-path="TablesChapter.html"><a href="TablesChapter.html#ResultsOptions"><i class="fa fa-check"></i><b>9.1</b> Basic <em>knitr</em> Syntax for Tables</a></li>
<li class="chapter" data-level="9.2" data-path="TablesChapter.html"><a href="TablesChapter.html#table-basics"><i class="fa fa-check"></i><b>9.2</b> Table Basics</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="TablesChapter.html"><a href="TablesChapter.html#LaTeXTables"><i class="fa fa-check"></i><b>9.2.1</b> Tables in LaTeX</a></li>
<li class="chapter" data-level="9.2.2" data-path="TablesChapter.html"><a href="TablesChapter.html#tables-in-markdownhtml"><i class="fa fa-check"></i><b>9.2.2</b> Tables in Markdown/HTML</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="TablesChapter.html"><a href="TablesChapter.html#creating-tables-from-supported-class-r-objects"><i class="fa fa-check"></i><b>9.3</b> Creating Tables from Supported Class R Objects</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="TablesChapter.html"><a href="TablesChapter.html#kable-for-markdown-and-latex"><i class="fa fa-check"></i><b>9.3.1</b> <code>kable</code> for Markdown and LaTeX</a></li>
<li class="chapter" data-level="9.3.2" data-path="TablesChapter.html"><a href="TablesChapter.html#xtable-for-latex-and-html"><i class="fa fa-check"></i><b>9.3.2</b> <em>xtable</em> for LaTeX and HTML</a></li>
<li class="chapter" data-level="9.3.3" data-path="TablesChapter.html"><a href="TablesChapter.html#texreg-for-latex-and-html"><i class="fa fa-check"></i><b>9.3.3</b> <em>texreg</em> for LaTeX and HTML</a></li>
<li class="chapter" data-level="9.3.4" data-path="TablesChapter.html"><a href="TablesChapter.html#fitting-large-tables-in-latex"><i class="fa fa-check"></i><b>9.3.4</b> Fitting large tables in LaTeX</a></li>
<li class="chapter" data-level="9.3.5" data-path="TablesChapter.html"><a href="TablesChapter.html#NonSupportedClasses"><i class="fa fa-check"></i><b>9.3.5</b> <em>xtable</em> with non-supported class objects</a></li>
<li class="chapter" data-level="9.3.6" data-path="TablesChapter.html"><a href="TablesChapter.html#Vardescript_tables"><i class="fa fa-check"></i><b>9.3.6</b> Creating variable description documents with <em>xtable</em></a></li>
<li class="chapter" data-level="" data-path="TablesChapter.html"><a href="TablesChapter.html#chapter-summary-6"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="TablesChapter.html"><a href="TablesChapter.html#appendix-1"><i class="fa fa-check"></i>Appendix</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="FiguresChapter.html"><a href="FiguresChapter.html"><i class="fa fa-check"></i><b>10</b> Showing Results with Figures</a>
<ul>
<li class="chapter" data-level="10.1" data-path="FiguresChapter.html"><a href="FiguresChapter.html#including-non-knitted-graphics"><i class="fa fa-check"></i><b>10.1</b> Including Non-knitted Graphics</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="FiguresChapter.html"><a href="FiguresChapter.html#including-graphics-in-latex"><i class="fa fa-check"></i><b>10.1.1</b> Including graphics in LaTeX</a></li>
<li class="chapter" data-level="10.1.2" data-path="FiguresChapter.html"><a href="FiguresChapter.html#including-graphics-in-markdownhtml"><i class="fa fa-check"></i><b>10.1.2</b> Including graphics in Markdown/HTML</a></li>
<li class="chapter" data-level="10.1.3" data-path="FiguresChapter.html"><a href="FiguresChapter.html#non-knitted-graphics-with-knitrrmarkdown"><i class="fa fa-check"></i><b>10.1.3</b> Non-knitted graphics with <em>knitr</em>/<em>rmarkdown</em></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="FiguresChapter.html"><a href="FiguresChapter.html#basic-knitrrmarkdown-figure-options"><i class="fa fa-check"></i><b>10.2</b> Basic <em>knitr</em>/<em>rmarkdown</em> Figure Options</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="FiguresChapter.html"><a href="FiguresChapter.html#chunk-options"><i class="fa fa-check"></i><b>10.2.1</b> Chunk options</a></li>
<li class="chapter" data-level="10.2.2" data-path="FiguresChapter.html"><a href="FiguresChapter.html#global-options"><i class="fa fa-check"></i><b>10.2.2</b> Global options</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="FiguresChapter.html"><a href="FiguresChapter.html#knitting-rs-default-graphics"><i class="fa fa-check"></i><b>10.3</b> Knitting R’s Default Graphics</a></li>
<li class="chapter" data-level="10.4" data-path="FiguresChapter.html"><a href="FiguresChapter.html#including-ggplot2-graphics"><i class="fa fa-check"></i><b>10.4</b> Including <em>ggplot2</em> Graphics</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="FiguresChapter.html"><a href="FiguresChapter.html#showing-regression-results-with-caterpillar-plots"><i class="fa fa-check"></i><b>10.4.1</b> Showing regression results with caterpillar plots</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="FiguresChapter.html"><a href="FiguresChapter.html#javascript-graphs-with-googlevis"><i class="fa fa-check"></i><b>10.5</b> JavaScript Graphs with <em>googleVis</em></a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="FiguresChapter.html"><a href="FiguresChapter.html#basic-googlevis-figures"><i class="fa fa-check"></i><b>10.5.1</b> Basic googleVis figures</a></li>
<li class="chapter" data-level="10.5.2" data-path="FiguresChapter.html"><a href="FiguresChapter.html#including-googlevis-in-knitted-documents"><i class="fa fa-check"></i><b>10.5.2</b> Including <em>googleVis</em> in knitted documents</a></li>
<li class="chapter" data-level="10.5.3" data-path="FiguresChapter.html"><a href="FiguresChapter.html#javascript-graphs-with-htmlwidgets-based-packages"><i class="fa fa-check"></i><b>10.5.3</b> JavaScript Graphs with <em>htmlwidgets</em>-based packages</a></li>
<li class="chapter" data-level="" data-path="FiguresChapter.html"><a href="FiguresChapter.html#chapter-summary-7"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Presentation Documents</b></span></li>
<li class="chapter" data-level="11" data-path="LatexChapter.html"><a href="LatexChapter.html"><i class="fa fa-check"></i><b>11</b> Presenting with LaTeX</a>
<ul>
<li class="chapter" data-level="11.1" data-path="LatexChapter.html"><a href="LatexChapter.html#the-basics"><i class="fa fa-check"></i><b>11.1</b> The Basics</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="LatexChapter.html"><a href="LatexChapter.html#getting-started-with-latex-editors"><i class="fa fa-check"></i><b>11.1.1</b> Getting started with LaTeX editors</a></li>
<li class="chapter" data-level="11.1.2" data-path="LatexChapter.html"><a href="LatexChapter.html#basic-latex-command-syntax"><i class="fa fa-check"></i><b>11.1.2</b> Basic LaTeX command syntax</a></li>
<li class="chapter" data-level="11.1.3" data-path="LatexChapter.html"><a href="LatexChapter.html#LaTeXPreamble"><i class="fa fa-check"></i><b>11.1.3</b> The LaTeX preamble and body</a></li>
<li class="chapter" data-level="11.1.4" data-path="LatexChapter.html"><a href="LatexChapter.html#headings"><i class="fa fa-check"></i><b>11.1.4</b> Headings</a></li>
<li class="chapter" data-level="11.1.5" data-path="LatexChapter.html"><a href="LatexChapter.html#paragraphs-and-spacing"><i class="fa fa-check"></i><b>11.1.5</b> Paragraphs and spacing</a></li>
<li class="chapter" data-level="11.1.6" data-path="LatexChapter.html"><a href="LatexChapter.html#horizontal-lines"><i class="fa fa-check"></i><b>11.1.6</b> Horizontal lines</a></li>
<li class="chapter" data-level="11.1.7" data-path="LatexChapter.html"><a href="LatexChapter.html#text-formatting"><i class="fa fa-check"></i><b>11.1.7</b> Text formatting</a></li>
<li class="chapter" data-level="11.1.8" data-path="LatexChapter.html"><a href="LatexChapter.html#MathLaTeX"><i class="fa fa-check"></i><b>11.1.8</b> Math</a></li>
<li class="chapter" data-level="11.1.9" data-path="LatexChapter.html"><a href="LatexChapter.html#lists"><i class="fa fa-check"></i><b>11.1.9</b> Lists</a></li>
<li class="chapter" data-level="11.1.10" data-path="LatexChapter.html"><a href="LatexChapter.html#footnotes"><i class="fa fa-check"></i><b>11.1.10</b> Footnotes</a></li>
<li class="chapter" data-level="11.1.11" data-path="LatexChapter.html"><a href="LatexChapter.html#cross-references"><i class="fa fa-check"></i><b>11.1.11</b> Cross-references</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="LatexChapter.html"><a href="LatexChapter.html#BibTeXBib"><i class="fa fa-check"></i><b>11.2</b> Bibliographies with BibTeX</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="LatexChapter.html"><a href="LatexChapter.html#the-.bib-file"><i class="fa fa-check"></i><b>11.2.1</b> The <em>.bib</em> file</a></li>
<li class="chapter" data-level="11.2.2" data-path="LatexChapter.html"><a href="LatexChapter.html#including-citations-in-latex-documents"><i class="fa fa-check"></i><b>11.2.2</b> Including citations in LaTeX documents</a></li>
<li class="chapter" data-level="11.2.3" data-path="LatexChapter.html"><a href="LatexChapter.html#generating-a-bibtex-file-of-r-package-citations"><i class="fa fa-check"></i><b>11.2.3</b> Generating a BibTeX file of R package citations</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="LatexChapter.html"><a href="LatexChapter.html#latexBeamer"><i class="fa fa-check"></i><b>11.3</b> Presentations with LaTeX Beamer</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="LatexChapter.html"><a href="LatexChapter.html#beamer-basics"><i class="fa fa-check"></i><b>11.3.1</b> Beamer basics</a></li>
<li class="chapter" data-level="11.3.2" data-path="LatexChapter.html"><a href="LatexChapter.html#knitr-with-latex-slideshows"><i class="fa fa-check"></i><b>11.3.2</b> <em>knitr</em> with LaTeX slideshows</a></li>
<li class="chapter" data-level="" data-path="LatexChapter.html"><a href="LatexChapter.html#chapter-summary-8"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html"><i class="fa fa-check"></i><b>12</b> Presenting in a Variety of Formats with R Markdown</a>
<ul>
<li class="chapter" data-level="12.1" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#the-basics-1"><i class="fa fa-check"></i><b>12.1</b> The Basics</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#getting-started-with-markdown-editors"><i class="fa fa-check"></i><b>12.1.1</b> Getting started with Markdown editors</a></li>
<li class="chapter" data-level="12.1.2" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#preamble-and-document-structure"><i class="fa fa-check"></i><b>12.1.2</b> Preamble and document structure</a></li>
<li class="chapter" data-level="12.1.3" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#MarkdownHeader"><i class="fa fa-check"></i><b>12.1.3</b> Headings</a></li>
<li class="chapter" data-level="12.1.4" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#horizontal-lines-1"><i class="fa fa-check"></i><b>12.1.4</b> Horizontal lines</a></li>
<li class="chapter" data-level="12.1.5" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#paragraphs-and-new-lines"><i class="fa fa-check"></i><b>12.1.5</b> Paragraphs and new lines</a></li>
<li class="chapter" data-level="12.1.6" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#italics-and-bold-1"><i class="fa fa-check"></i><b>12.1.6</b> Italics and bold</a></li>
<li class="chapter" data-level="12.1.7" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#MarkdownLinks"><i class="fa fa-check"></i><b>12.1.7</b> Links</a></li>
<li class="chapter" data-level="" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#special-characters-and-font-customization"><i class="fa fa-check"></i>Special characters and font customization</a></li>
<li class="chapter" data-level="12.1.8" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#lists-1"><i class="fa fa-check"></i><b>12.1.8</b> Lists</a></li>
<li class="chapter" data-level="" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#escape-characters"><i class="fa fa-check"></i>Escape characters</a></li>
<li class="chapter" data-level="12.1.9" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#math-with-mathjax"><i class="fa fa-check"></i><b>12.1.9</b> Math with MathJax</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#further-customizability-with-rmarkdown"><i class="fa fa-check"></i><b>12.2</b> Further Customizability with <em>rmarkdown</em></a>
<ul>
<li class="chapter" data-level="" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#more-on-rmarkdown-headers"><i class="fa fa-check"></i>More on <em>rmarkdown</em> Headers</a></li>
<li class="chapter" data-level="12.2.1" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#css-style-files-and-markdown"><i class="fa fa-check"></i><b>12.2.1</b> CSS style files and Markdown</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#slideshows-with-markdown-r-markdown-and-html"><i class="fa fa-check"></i><b>12.3</b> Slideshows with Markdown, R Markdown, and HTML</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#html-slideshows-with-rmarkdown"><i class="fa fa-check"></i><b>12.3.1</b> HTML slideshows with <em>rmarkdown</em></a></li>
<li class="chapter" data-level="12.3.2" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#rmarkdownBeamer"><i class="fa fa-check"></i><b>12.3.2</b> LaTeX Beamer slideshows with <em>rmarkdown</em></a></li>
<li class="chapter" data-level="12.3.3" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#slideshows-with-markdown-and-rstudios-r-presentations"><i class="fa fa-check"></i><b>12.3.3</b> Slideshows with Markdown and RStudio’s R Presentations</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#publishing-html-documents-created-with-r-markdown"><i class="fa fa-check"></i><b>12.4</b> Publishing HTML Documents Created with R Markdown</a>
<ul>
<li class="chapter" data-level="" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#standalone-html-files"><i class="fa fa-check"></i>Standalone HTML files</a></li>
<li class="chapter" data-level="" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#github-pages"><i class="fa fa-check"></i>GitHub Pages</a></li>
<li class="chapter" data-level="12.4.1" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#further-information-on-r-markdown"><i class="fa fa-check"></i><b>12.4.1</b> Further information on R Markdown</a></li>
<li class="chapter" data-level="" data-path="MarkdownChapter.html"><a href="MarkdownChapter.html#chapter-summary-9"><i class="fa fa-check"></i>Chapter summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="bookconclusion.html"><a href="bookconclusion.html"><i class="fa fa-check"></i><b>13</b> Conclusion</a>
<ul>
<li class="chapter" data-level="13.1" data-path="bookconclusion.html"><a href="bookconclusion.html#citing-reproducible-research"><i class="fa fa-check"></i><b>13.1</b> Citing Reproducible Research</a></li>
<li class="chapter" data-level="13.2" data-path="bookconclusion.html"><a href="bookconclusion.html#licensing-your-reproducible-research"><i class="fa fa-check"></i><b>13.2</b> Licensing Your Reproducible Research</a></li>
<li class="chapter" data-level="13.3" data-path="bookconclusion.html"><a href="bookconclusion.html#sharing-your-code-in-packages"><i class="fa fa-check"></i><b>13.3</b> Sharing Your Code in Packages</a></li>
<li class="chapter" data-level="13.4" data-path="bookconclusion.html"><a href="bookconclusion.html#project-development-public-or-private"><i class="fa fa-check"></i><b>13.4</b> Project Development: Public or Private?</a></li>
<li class="chapter" data-level="13.5" data-path="bookconclusion.html"><a href="bookconclusion.html#is-it-possible-to-completely-future-proof-your-research"><i class="fa fa-check"></i><b>13.5</b> Is it Possible to Completely Future-Proof Your Research?</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible Research with R and RStudio (Third Edition)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="DataGather" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Gathering Data with R<a href="DataGather.html#DataGather" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>How you gather your data directly impacts how reproducible your research
will be. You should try your best to document every step of your data
gathering process. Reproduction will be easier if your
documentation—especially, variable descriptions and source code—makes
it easy for you and others to understand what you have done. If all of
your data gathering steps are tied by your source code, then
independent researchers (and you) can more easily regather the data.
Regathering data will be easiest if running your code allows you to get
all the way back to the raw data files, the rawer the better. Of course,
this may not always be possible. You may need to conduct interviews or
compile information from paper-based archives, for example. Data hosted online may disappear when the host ceases operation. The best you
can sometimes do is describe your data gathering process in detail or
rehost an original data set.
Nonetheless, R’s automated data gathering capabilities for
internet-based information is extensive. Learning how to take full
advantage of these capabilities greatly increases reproducibility and
can save you considerable time and effort over the long run.</p>
<p>In this chapter we’ll learn strategies for how to gather quantitative data in a fully
reproducible way. We’ll start by learning how to use data gathering
makefiles to organize your whole data gathering process so that it can
be completely reproduced. Then we will learn the details of how to
actually load data into R from various sources, both locally on your
computer and remotely via the internet. In the next chapter (Chapter <a href="DataClean.html#DataClean">7</a>),
we’ll learn the details of how to clean up raw data so that it can be
merged into data frames that can be used for statistical
analyses.</p>
<div id="organize-your-data-gathering-makefiles" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Organize Your Data Gathering: Makefiles<a href="DataGather.html#organize-your-data-gathering-makefiles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before getting into the details of using R to gather data, let’s start
by creating a plan to organize the process. Organizing your data
gathering process from the beginning of a research project improves the
possibility of reproducibility and can save you significant effort over
the course of the project by making it easier to add and regather data
later on.</p>
<p>A key part of reproducible data gathering with R, like reproducible
research in general, is segmenting the process into modular files that
can all be run in sequence by a common “makefile”. In this chapter we’ll learn how
to create make-like files run exclusively from R as well as GNU Make
makefiles,<a href="#fn119" class="footnote-ref" id="fnref119"><sup>119</sup></a> which you run from a shell.<a href="#fn120" class="footnote-ref" id="fnref120"><sup>120</sup></a> Learning how to create R
make-like files is fairly easy. Using GNU Make does require learning
some more new syntax. However, it has one very clear advantage: it only
runs a source code file that has been updated since the last time you
ran the makefile. This is very useful if part of your data-gathering
process is very computationally and time intensive.</p>
<p>Segmenting your data gathering into modular files and tying them with some sort of makefile allows you to more easily navigate research text and find errors in the source code. The makefile’s output
is the data set that you’ll use in the statistical analyses. There are
two types of source code files that the makefile runs: data
gathering/cleanup files and merging files. Data cleanup files bring raw
individual data sources into R and transform them so that they can be
merged with data from the other sources. Many of the R tools
for data cleanup and merging will be covered in Chapter <a href="DataClean.html#DataClean">7</a>.
In this chapter, we mostly cover the ways to bring raw data into R.
Merging files are executed by the makefile after it runs the data
gathering/cleanup files.</p>
<p>It’s a good idea to have the source code files use very raw data as
input. Your source code should avoid directly changing these raw data
files. Instead, changes should be put into new objects and data files.
Doing this makes it easier to reconstruct the steps you took to create
your data set. Also, while cleaning and merging your data you may
transform it in unintended ways, for example, accidentally deleting some
observations that you wanted to keep. Having the raw data makes it easy
to go back and correct your mistakes.</p>
<p>The files for the examples used in this section can be downloaded from
GitHub at: <a href="https://github.com/christophergandrud/rep-res-book-v3-examples" class="uri">https://github.com/christophergandrud/rep-res-book-v3-examples</a>.</p>
<div id="r-make-like-files" class="section level3 hasAnchor" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> R Make-like files<a href="DataGather.html#r-make-like-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you create make-like files in R to organize and run your data
gathering, you usually only need one or two functions, <code>setwd()</code> and <code>source()</code>.
As we talked about in Chapter <a href="DirectoriesChapter.html#DirectoriesChapter">4</a>, <code>setwd()</code> tells R where to look for and
place files. <code>source()</code> tells R to run code in an R source code file.<a href="#fn121" class="footnote-ref" id="fnref121"><sup>121</sup></a>
Let’s see what an R data makefile might look like for a project with a file
structure similar to the example project in Figure <a href="DirectoriesChapter.html#fig:ExampleTree">4.1</a>. The file paths in this example are for
Unix-like systems and the make-like file is called <em>Makefile.R</em>.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="DataGather.html#cb160-1" tabindex="-1"></a><span class="do">################ # Example R make-like file</span></span>
<span id="cb160-2"><a href="DataGather.html#cb160-2" tabindex="-1"></a><span class="co"># Christopher Gandrud</span></span>
<span id="cb160-3"><a href="DataGather.html#cb160-3" tabindex="-1"></a><span class="co"># Updated 12 January 2019</span></span>
<span id="cb160-4"><a href="DataGather.html#cb160-4" tabindex="-1"></a><span class="do">################</span></span>
<span id="cb160-5"><a href="DataGather.html#cb160-5" tabindex="-1"></a></span>
<span id="cb160-6"><a href="DataGather.html#cb160-6" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb160-7"><a href="DataGather.html#cb160-7" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/example-project/data/&quot;</span>)</span>
<span id="cb160-8"><a href="DataGather.html#cb160-8" tabindex="-1"></a></span>
<span id="cb160-9"><a href="DataGather.html#cb160-9" tabindex="-1"></a><span class="co"># Gather and cleanup raw data files with a for loop</span></span>
<span id="cb160-10"><a href="DataGather.html#cb160-10" tabindex="-1"></a>gatherers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gather-1.R&quot;</span>, <span class="st">&quot;gather-2.R&quot;</span>, <span class="st">&quot;gather-3.R&quot;</span>)</span>
<span id="cb160-11"><a href="DataGather.html#cb160-11" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> gatherers) <span class="fu">source</span>(i)</span>
<span id="cb160-12"><a href="DataGather.html#cb160-12" tabindex="-1"></a></span>
<span id="cb160-13"><a href="DataGather.html#cb160-13" tabindex="-1"></a><span class="co"># Merge cleaned data frames into data frame object cleaned_data</span></span>
<span id="cb160-14"><a href="DataGather.html#cb160-14" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;merge-data.R&quot;</span>)</span></code></pre></div>
<p>This code first sets the working directory. Then it runs three source
code files to gather data from three different sources. These files
gather the data and clean it so that it can be merged. The
cleaned data frames are available in the current workspace. Next the
code runs the <em>merge-data.R</em> file that merges the data frames and saves
the output data frame as a CSV formatted file. The CSV file could be the
main file we use for statistical analysis. <em>merge-data.R</em> also creates a
Markdown file with a table describing the variables and their sources.
We’ll come back to how to create tables in Chapter <a href="TablesChapter.html#TablesChapter">9</a>.</p>
<p>You can run the commands in this file one-by-one or run the make-like
file by putting it through the <code>source()</code> function so
that it will run it all at once.</p>
</div>
<div id="gnu-make" class="section level3 hasAnchor" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> GNU Make<a href="DataGather.html#gnu-make" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R make-like files are a simple way to tie together a segmented data
gathering process. If one or more of the source files that our previous example runs is computationally intensive it is a good idea to run them
only when they are updated. However, this can become tedious, especially
if there are many segments. The well-established GNU Make command-line
program<a href="#fn122" class="footnote-ref" id="fnref122"><sup>122</sup></a> deals with this problem by comparing the output files’ time
stamps<a href="#fn123" class="footnote-ref" id="fnref123"><sup>123</sup></a> to time stamps of the source files that created them. If a
source file has a time stamp that is newer than its output, Make will
run it. If the source’s time stamp is older than its output, Make will
skip it.</p>
<p>In Make terminology the output files are called “targets” and the files
that create them are called “prerequisites”. You specify a “recipe” to
create the targets from the prerequisites. The recipe is basically just
the code you want to run to make the target file. The general form is:</p>
<pre><code>    TARGET ... : PREREQUISITE ...
        RECIPE
        ...
        ...</code></pre>
<p>Note that, unlike in R, tabs are important in Make. They indicate what
lines are the recipe. Make uses the recipe to ensure that targets are
newer than prerequisites. If a target is newer than its prerequisite,
Make does not run the prerequisite.</p>
<p>The basic idea of reproducible data gathering with Make is similar to
what we saw before, with a few twists and some new syntax. Let’s see an
example that does what we did before: gather data from three sources,
clean and merge the data, and save it in CSV format.</p>
<div id="AsteriskWildcard" class="section level4 unnumbered hasAnchor">
<h4>Example makefile<a href="DataGather.html#AsteriskWildcard" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The first thing we need to do is create a new file called <em>Makefile</em><a href="#fn124" class="footnote-ref" id="fnref124"><sup>124</sup></a>
and place it in the same directory as the data gathering files we
already have. The makefile we are going to create runs prerequisite
files by the alphanumeric order of their file names. So we need to
ensure that the files are named in the order that we want to run them.
Now let’s look at the actual makefile:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb162-1"><a href="DataGather.html#cb162-1" tabindex="-1"></a>  <span class="co">################</span></span>
<span id="cb162-2"><a href="DataGather.html#cb162-2" tabindex="-1"></a>  <span class="co"># Example Makefile</span></span>
<span id="cb162-3"><a href="DataGather.html#cb162-3" tabindex="-1"></a>  <span class="co"># Christopher Gandrud</span></span>
<span id="cb162-4"><a href="DataGather.html#cb162-4" tabindex="-1"></a>  <span class="co"># Updated 1 July 2013</span></span>
<span id="cb162-5"><a href="DataGather.html#cb162-5" tabindex="-1"></a>  <span class="co"># Influenced by Rob Hyndman (31 October 2012)</span></span>
<span id="cb162-6"><a href="DataGather.html#cb162-6" tabindex="-1"></a>  <span class="co"># See: http://robjhyndman.com/researchtips/makefiles/</span></span>
<span id="cb162-7"><a href="DataGather.html#cb162-7" tabindex="-1"></a>  <span class="co">################</span></span>
<span id="cb162-8"><a href="DataGather.html#cb162-8" tabindex="-1"></a></span>
<span id="cb162-9"><a href="DataGather.html#cb162-9" tabindex="-1"></a>  <span class="co"># Key variables to define</span></span>
<span id="cb162-10"><a href="DataGather.html#cb162-10" tabindex="-1"></a>  <span class="ex">RDIR</span> = .</span>
<span id="cb162-11"><a href="DataGather.html#cb162-11" tabindex="-1"></a>  <span class="ex">MERGE_OUT</span> = merge-data.Rout</span>
<span id="cb162-12"><a href="DataGather.html#cb162-12" tabindex="-1"></a></span>
<span id="cb162-13"><a href="DataGather.html#cb162-13" tabindex="-1"></a>  <span class="co"># Create list of R source files</span></span>
<span id="cb162-14"><a href="DataGather.html#cb162-14" tabindex="-1"></a>  <span class="ex">RSOURCE</span> = <span class="va">$(</span><span class="ex">wildcard</span> <span class="va">$(</span><span class="ex">RDIR</span><span class="va">)</span>/<span class="pp">*</span>.R<span class="va">)</span></span>
<span id="cb162-15"><a href="DataGather.html#cb162-15" tabindex="-1"></a></span>
<span id="cb162-16"><a href="DataGather.html#cb162-16" tabindex="-1"></a>  <span class="co"># Files to indicate when the RSOURCE file was run</span></span>
<span id="cb162-17"><a href="DataGather.html#cb162-17" tabindex="-1"></a>  <span class="ex">OUT_FILES</span> = <span class="va">$(</span><span class="ex">RSOURCE:.R=.Rout</span><span class="va">)</span></span>
<span id="cb162-18"><a href="DataGather.html#cb162-18" tabindex="-1"></a></span>
<span id="cb162-19"><a href="DataGather.html#cb162-19" tabindex="-1"></a>  <span class="co"># Default target</span></span>
<span id="cb162-20"><a href="DataGather.html#cb162-20" tabindex="-1"></a>  <span class="ex">all:</span> <span class="va">$(</span><span class="ex">OUT_FILES</span><span class="va">)</span></span>
<span id="cb162-21"><a href="DataGather.html#cb162-21" tabindex="-1"></a></span>
<span id="cb162-22"><a href="DataGather.html#cb162-22" tabindex="-1"></a>  <span class="co"># Run the RSOURCE files</span></span>
<span id="cb162-23"><a href="DataGather.html#cb162-23" tabindex="-1"></a>  <span class="va">$(</span><span class="ex">RDIR</span><span class="va">)</span><span class="ex">/%.Rout:</span> <span class="va">$(</span><span class="ex">RDIR</span><span class="va">)</span>/%.R</span>
<span id="cb162-24"><a href="DataGather.html#cb162-24" tabindex="-1"></a>      <span class="ex">R</span> CMD BATCH $<span class="op">&lt;</span></span>
<span id="cb162-25"><a href="DataGather.html#cb162-25" tabindex="-1"></a></span>
<span id="cb162-26"><a href="DataGather.html#cb162-26" tabindex="-1"></a>  <span class="co"># Remove Out Files</span></span>
<span id="cb162-27"><a href="DataGather.html#cb162-27" tabindex="-1"></a>  <span class="ex">clean:</span></span>
<span id="cb162-28"><a href="DataGather.html#cb162-28" tabindex="-1"></a>      <span class="fu">rm</span> <span class="at">-fv</span> <span class="va">$(</span><span class="ex">OUT_FILES</span><span class="va">)</span></span>
<span id="cb162-29"><a href="DataGather.html#cb162-29" tabindex="-1"></a></span>
<span id="cb162-30"><a href="DataGather.html#cb162-30" tabindex="-1"></a>  <span class="co"># Remove merge-data.Rout</span></span>
<span id="cb162-31"><a href="DataGather.html#cb162-31" tabindex="-1"></a>  <span class="ex">cleanMerge:</span></span>
<span id="cb162-32"><a href="DataGather.html#cb162-32" tabindex="-1"></a>      <span class="fu">rm</span> <span class="at">-fv</span> <span class="va">$(</span><span class="ex">MERGE_OUT</span><span class="va">)</span></span></code></pre></div>
<p>Ok, let’s break down the code. The first part of the file defines
variables that will be used later on. For example, in the first line of
executable code (<code>RDIR = .</code>) we create a simple variable<a href="#fn125" class="footnote-ref" id="fnref125"><sup>125</sup></a> called
<code>RDIR</code> with a period (<code>.</code>) as its value. In Make and Unix-like shells,
periods indicate the current directory. The next line allows us to
specify a variable for the outfile created by running the <em>merge-data.R</em>
file. This will be useful later when we create a target for removing
this file to ensure that the <em>merge-data.R</em> file is always run.</p>
<p>The third executed line (<code>RSOURCE:= $(wildcard $(RDIR)/*.R)</code>) creates a
variable containing a list of all the names of files with the
extension <code>.R</code>, i.e. our data gathering and merge source code files.
This line has some new syntax, so let’s work through it. In Make (and
Unix-like shells generally) a dollar sign (<code>$</code>) followed by a variable
name substitutes the value of the variable in place of the name.<a href="#fn126" class="footnote-ref" id="fnref126"><sup>126</sup></a> For
example, <code>$(RDIR)</code> inserts the period <code>.</code> that we defined as the value
of <code>RDIR</code> previously. The parentheses are included to clearly demarcate
where the variable name begins and ends.<a href="#fn127" class="footnote-ref" id="fnref127"><sup>127</sup></a></p>
<p>You may remember the asterisk (<code>*</code>) from the previous chapter. It is a
“wildcard”, a special character that allows you to select
file names that follow a particular pattern. Using <code>*.R</code> selects any
file name that ends in <code>.R</code>.</p>
<p>Why did we also include the actual word <code>wildcard</code>? The <code>wildcard</code>
function is different from the asterisk wildcard character. The function
creates a list of files that match a pattern. In this case the pattern
is <code>$(RDIR)/*.R</code>. The general form for writing the <code>wildcard</code> function
is: <code>$(wildcard PATTERN)</code>.</p>
<p>The third line (<code>OUT_FILES = $(RSOURCE:.R=.Rout)</code>) creates a variable
for the <code>.Rout</code> files that Make will use to tell how recently each R
file was run.<a href="#fn128" class="footnote-ref" id="fnref128"><sup>128</sup></a> <code>$(RSOURCE:.R=.Rout)</code> is a variable that uses the
same file name as our RSOURCE files, but with the file extension
<code>.Rout</code>.</p>
<p>The second part of the makefile tells Make what we want to create and
how to create it. In the line <code>all: $(OUT_FILES</code>) we are specifying the
makefile’s default target. Targets are the files that you instruct Make
to make. <code>all:</code> sets the default target; it is what Make tries to create
when you enter the command <code>make</code> in the shell with no arguments. We
will see later how to instruct Make to compile different targets.</p>
<p>The next two executable lines (<code>$(RDIR)/%.Rout: $(RDIR)/%.R</code> and
<code>R CMD BATCH $&lt;</code>) run the R source code files in the directory. The
first line specifies that the <code>.Rout</code> files are the targets of the <code>.R</code>
files. The percent sign (<code>%</code>) is another wildcard. Unlike the asterisk,
it replaces the selected file names throughout the command used to
create the target.</p>
<p>The dollar and less-than signs (<code>$&lt;</code>) indicate the first prerequisite
for the target, i.e. the <code>.R</code> files. <code>R CMD BATCH</code> is a way to call R
from a Unix-like shell, run source files, and output the results to
other files.<a href="#fn129" class="footnote-ref" id="fnref129"><sup>129</sup></a> The out-files it creates have the extension <code>.Rout</code>.</p>
<p>The next two lines specify another target: <code>clean</code>. When you type
<code>make clean</code> into your shell, Make will follow the recipe:
<code>rm -fv $(OUT_FILES)</code>. This removes (deletes) the <code>.Rout</code> files. The <code>f</code>
argument (force) ignores files that don’t exist and the <code>v</code> argument
(verbose) instructs Make to tell you what is happening when it runs.
When you delete the <code>.Rout</code> files, Make will run all of the <code>.R</code> files
the next time you call it.</p>
<p>The last two lines help us solve a problem created by the fact that our
simple makefile doesn’t push changes downstream. For example, if we make
a change to <em>gather-2.R</em> and run <code>make</code>, only <em>gather-2.R</em> will be rerun.
The new data frame will not be added to the final merged data set. To
overcome this problem, the last two lines of code create a target called
<code>cleanMerge</code>; this removes only the <em>merge-data.Rout</em> file.</p>
</div>
<div id="running-the-makefile" class="section level4 unnumbered hasAnchor">
<h4>Running the Makefile<a href="DataGather.html#running-the-makefile" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To run the makefile for the first time, change the working
directory to where the file is and type <code>make</code> into your shell. It will
create the CSV final data file and four files with the extension
<code>.Rout</code>, indicating when the segmented data gathering files were last
run.<a href="#fn130" class="footnote-ref" id="fnref130"><sup>130</sup></a></p>
<p>When you run <code>make</code> in the shell for the first time, you should get the
output: </p>
<div class="sourceCode" id="cb163"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb163-1"><a href="DataGather.html#cb163-1" tabindex="-1"></a><span class="co">## R CMD BATCH gather-1.R</span></span>
<span id="cb163-2"><a href="DataGather.html#cb163-2" tabindex="-1"></a><span class="co">## R CMD BATCH gather-2.R</span></span>
<span id="cb163-3"><a href="DataGather.html#cb163-3" tabindex="-1"></a><span class="co">## R CMD BATCH gather-3.R</span></span>
<span id="cb163-4"><a href="DataGather.html#cb163-4" tabindex="-1"></a><span class="co">## R CMD BATCH merge-data.R</span></span></code></pre></div>
<p>If you run it a second time without changing the R source files, you will
get the following output:</p>
<pre><code>## make: Nothing to be done for &#39;all&#39;.</code></pre>
<p>To remove all of the <code>.Rout</code> files, set the make target to <code>clean</code>:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb165-1"><a href="DataGather.html#cb165-1" tabindex="-1"></a><span class="fu">make</span> clean</span>
<span id="cb165-2"><a href="DataGather.html#cb165-2" tabindex="-1"></a></span>
<span id="cb165-3"><a href="DataGather.html#cb165-3" tabindex="-1"></a><span class="co">## rm -fv ./gather-1.Rout ./gather-2.Rout ./gather-3.Rout</span></span>
<span id="cb165-4"><a href="DataGather.html#cb165-4" tabindex="-1"></a><span class="co">## ./merge-data.Rout</span></span>
<span id="cb165-5"><a href="DataGather.html#cb165-5" tabindex="-1"></a><span class="co">## ./gather-1.Rout</span></span>
<span id="cb165-6"><a href="DataGather.html#cb165-6" tabindex="-1"></a><span class="co">## ./gather-2.Rout</span></span>
<span id="cb165-7"><a href="DataGather.html#cb165-7" tabindex="-1"></a><span class="co">## ./gather-3.Rout</span></span>
<span id="cb165-8"><a href="DataGather.html#cb165-8" tabindex="-1"></a><span class="co">## ./merge-data.Rout</span></span></code></pre></div>
<p>If we run the following code:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb166-1"><a href="DataGather.html#cb166-1" tabindex="-1"></a><span class="co"># Remove merge-data.Rout and make all R source files</span></span>
<span id="cb166-2"><a href="DataGather.html#cb166-2" tabindex="-1"></a><span class="fu">make</span> cleanMerge all</span></code></pre></div>
<p>then Make will first remove the <em>merge-data.Rout</em> file (if there is one)
and then run all of the R source files as need be. <em>merge-data.R</em> will
always be run. This ensures that changes to the gathered data frames are
updated in the final merged data set.</p>
</div>
<div id="makefiles-and-rstudio-projects" class="section level4 unnumbered hasAnchor">
<h4>Makefiles and RStudio Projects<a href="DataGather.html#makefiles-and-rstudio-projects" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can run makefiles from RStudio’s <em>Build</em> tab. For the type of
makefile we have been using, the main advantage of running it from
within RStudio is that you don’t have to toggle between RStudio and the
shell. Everything is in one place. Imagine that the directory with our
makefile is an RStudio Project. If a Project already contains a
makefile, RStudio will automatically open a <em>Build</em> tab on the
<em>Environment/History/Connections</em> pane, the same place where the <em>Git</em> tab appears
(see Figure <a href="DataGather.html#fig:Ch6BuildTab">6.1</a>).<a href="#fn131" class="footnote-ref" id="fnref131"><sup>131</sup></a></p>
<p>The <em>Build</em> tab has buttons you can click to <code>Build All</code> (this is
equivalent to <code>make all</code>), and, in the <code>More</code> drop-down menu,
<code>Clean all</code> (i.e., <code>make clean</code>) and <code>Clean and Rebuild</code> (i.e.,
<code>make clean all</code>). As you can see in Figure <a href="DataGather.html#fig:Ch6BuildTab">6.1</a>, the <em>Build</em>
tab shows you the same output you get in the shell.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:Ch6BuildTab"></span>
<img src="images/chapter_6/BuildTab.png" alt="The RStudio Build Pane" width="50%" />
<p class="caption">
FIGURE 6.1: The RStudio Build Pane
</p>
</div>
</div>
<div id="other-information-about-makefiles" class="section level4 unnumbered hasAnchor">
<h4>Other information about makefiles<a href="DataGather.html#other-information-about-makefiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Note that Make relies heavily on commands and syntax of the shell
program that you are using. The above example was written and tested on
a Mac. It should work on other Unix-like computers without modification.</p>
<p>You can use Make to build almost any project from the shell, not just to
run R source code files. It was an integral part of early reproducible
computational research <span class="citation">(<a href="#ref-fomel2009">Fomel and Claerbout 2009</a>; <a href="#ref-buckheit1995">Buckheit and Donoho 1995</a>)</span>. Rob Hyndman more
recently posted a description of the makefile he uses to create a
project with R and LaTeX.<a href="#fn132" class="footnote-ref" id="fnref132"><sup>132</sup></a> The complete source of information on GNU
Make is the official online manual. It is available at:
<a href="http://www.gnu.org/software/make/manual/" class="uri">http://www.gnu.org/software/make/manual/</a>.</p>
</div>
</div>
</div>
<div id="importing-locally-stored-data-sets" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Importing Locally Stored Data Sets<a href="DataGather.html#importing-locally-stored-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we’ve covered the big picture, let’s learn the different tools
you will need to know to gather data from different types of sources.
The most straightforward place to load data from is a local file, e.g.
one stored on your computer. Though storing your data locally does not
really encourage reproducibility, most research projects will involve
loading data this way at some point. The tools you will learn for
importing locally stored data files will also be important for most of
the other methods further on.</p>
<p>Data stored in plain-text files on your computer can be loaded into R
using the <code>read.table()</code> function. For example, imagine we have a CSV file called <em>test-data.csv</em> stored in the current working directory. To load
the data set into R, type:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="DataGather.html#cb167-1" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;test-data.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb167-2"><a href="DataGather.html#cb167-2" tabindex="-1"></a>                        <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>If you are using RStudio, you can do the same thing with drop-down menus.
To open a plain-text data file, click on <code>Environment</code> <code>Import Dataset…</code>
<code>From Text File…</code>. In the box that pops up, specify the column
separator, whether or not you want the first line to be treated as
variable labels, and other options. This is initially easier than using
<code>read.table()</code>, but it is much less reproducible.</p>
<p>If the data is not stored in plain-text format but is instead saved in
a format created by another statistical program such as SPSS, SAS, or
Stata, we can import it using commands in the <em>foreign</em> package. For
example, imagine we have a data file called <em>data-1.dta</em> stored in our
working directory. This file was created by the Stata statistical
program. To load the data into an R data frame object called <em>stata_data</em>, type:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="DataGather.html#cb168-1" tabindex="-1"></a><span class="co"># Load foreign package</span></span>
<span id="cb168-2"><a href="DataGather.html#cb168-2" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb168-3"><a href="DataGather.html#cb168-3" tabindex="-1"></a></span>
<span id="cb168-4"><a href="DataGather.html#cb168-4" tabindex="-1"></a><span class="co"># Load Stata formatted data</span></span>
<span id="cb168-5"><a href="DataGather.html#cb168-5" tabindex="-1"></a>stata_data <span class="ot">&lt;-</span> <span class="fu">read.dta</span>(<span class="at">file =</span> <span class="st">&quot;data-1.dta&quot;</span>)</span></code></pre></div>
<p>As you can see, functions in the <em>foreign</em> package have similar syntax to
<code>read.table()</code>. To see the full range of commands and file formats that
the <em>foreign</em> package supports, use the following: </p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="DataGather.html#cb169-1" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> <span class="st">&quot;foreign&quot;</span>)</span></code></pre></div>
<p>Typically an even simpler solution is to use <code>import()</code> from the <em>rio</em> package. It will automatically try to find the right way to parse whatever data format you give it. For example:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="DataGather.html#cb170-1" tabindex="-1"></a>stata_data <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">&quot;data-1.dta&quot;</span>)</span></code></pre></div>
<p>If you have data stored in a spreadsheet format such as Excel’s <em>.xlsx</em>,
it may be best to first clean up the data in the spreadsheet program by
hand and then save the file in plain-text format. When you clean up the
data, make sure that the first row has the variable names and that
observations are in the following rows. Also, remove any extraneous
information such as notes, colors, and so on that will not be part of
the data frame. <code>import()</code> can also attempt to import <em>.xlsx</em> files.
This is much easier if they are cleaned up to resemble text files.</p>
<p>To aid reproducibility, locally stored data should include careful
documentation of where the data came from and how, if at all, it was
transformed before it was loaded into R. Ideally, the documentation
would be written in a text file saved in the same directory as the raw
data file.</p>
</div>
<div id="importing-data-sets-from-the-internet" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Importing Data Sets from the Internet<a href="DataGather.html#importing-data-sets-from-the-internet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are many ways to import data that is stored on the internet
directly into R. We have to use different methods depending on where and
how the data is stored.</p>
<div id="data-from-non-secure-http-urls" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Data from non-secure (<em>http</em>) URLs<a href="DataGather.html#data-from-non-secure-http-urls" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Importing data into R that is located at a non-secure URL<a href="#fn133" class="footnote-ref" id="fnref133"><sup>133</sup></a>—ones
that start with <em>http</em>—is straightforward, provided that:</p>
<ul>
<li><p>the data is stored in a simple format, e.g. plain-text,</p></li>
<li><p>the file is not embedded in a larger HTML website.</p></li>
</ul>
<p>We already discussed the first issue in detail. You can determine if the
data file is embedded in a website by opening the URL in your web
browser. If you only see the raw plain-text data, you are probably good
to go. To import the data, include the URL as the file’s name in
your <code>read.table()</code> function.</p>
</div>
<div id="SecureDataDownload" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Data from secure (<em>https</em>) URLs<a href="DataGather.html#SecureDataDownload" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Storing data at non-secure URLs is now very uncommon. Services like
Dropbox, GitHub, and Dataverse store their data at secure URLs. You can tell if the data is stored at a secure web address if it begins with
<code>https</code> rather than <code>http</code>. We have to use a different function to
download data from secure URLs.</p>
<p>As we saw last chapter, in Section <a href="Storing.html#EnablePublicFolder">5.2.2</a>, <code>import()</code> has no problem gathering data from secure URLs, e.g.:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="DataGather.html#cb171-1" tabindex="-1"></a><span class="co"># Place the URL into the object fin_url</span></span>
<span id="cb171-2"><a href="DataGather.html#cb171-2" tabindex="-1"></a>fin_url <span class="ot">&lt;-</span> <span class="st">&quot;https://bit.ly/2xlQ2j5&quot;</span></span>
<span id="cb171-3"><a href="DataGather.html#cb171-3" tabindex="-1"></a></span>
<span id="cb171-4"><a href="DataGather.html#cb171-4" tabindex="-1"></a><span class="co"># Download data</span></span>
<span id="cb171-5"><a href="DataGather.html#cb171-5" tabindex="-1"></a>fin_regulator <span class="ot">&lt;-</span> <span class="fu">import</span>(fin_url, <span class="at">format =</span> <span class="st">&quot;csv&quot;</span>)</span></code></pre></div>
</div>
<div id="compressed-data-stored-online" class="section level3 hasAnchor" number="6.3.3">
<h3><span class="header-section-number">6.3.3</span> Compressed data stored online<a href="DataGather.html#compressed-data-stored-online" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes data files are large, making them difficult to store and
download without compressing them. There are a number of compression
methods such as Zip and Tar.<a href="#fn134" class="footnote-ref" id="fnref134"><sup>134</sup></a> Zip files have the extension <code>.zip</code> and Tar
files use extensions such as <code>.tar</code> and <code>.gz</code>. In most cases<a href="#fn135" class="footnote-ref" id="fnref135"><sup>135</sup></a> you can download,
decompress, and create data frame objects from these files directly in
R. To do this, you need to<a href="#fn136" class="footnote-ref" id="fnref136"><sup>136</sup></a></p>
<ul>
<li><p>create a temporary file with <code>tempfile()</code> to store the zipped file, which you will later remove with <code>unlink()</code> at the end,</p></li>
<li><p>download the file with <code>download.file()</code>,</p></li>
<li><p>decompress the file with one of the commands in base R,<a href="#fn137" class="footnote-ref" id="fnref137"><sup>137</sup></a></p></li>
<li><p>read the file with <code>read.csv()</code> or <code>import()</code>.</p></li>
</ul>
<p>The reason that we have to go through so many extra steps is that
compressed files are more than just a single file and contain a number
of files as well as metadata.</p>
<p>Let’s download a compressed file called <em>uds_summary.csv</em> from
<span class="citation">(<a href="#ref-pemstein2010">Pemstein, Meserve, and Melton 2010</a>)</span>. It’s in a compressed file called <em>uds_summary.csv.gz</em>.
At the time of writing, the file’s URL address is
<a href="http://www.unified-democracy-scores.org/files/20140312/z/uds_summary.csv.gz" class="uri">http://www.unified-democracy-scores.org/files/20140312/z/uds_summary.csv.gz</a>.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="DataGather.html#cb172-1" tabindex="-1"></a><span class="co"># For simplicity, store the URL in an object called &#39;URL&#39;</span></span>
<span id="cb172-2"><a href="DataGather.html#cb172-2" tabindex="-1"></a>URL <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;http://www.unified-democracy-scores.org/&quot;</span>,</span>
<span id="cb172-3"><a href="DataGather.html#cb172-3" tabindex="-1"></a>              <span class="st">&quot;files/20140312/z/uds_summary.csv.gz&quot;</span>)</span>
<span id="cb172-4"><a href="DataGather.html#cb172-4" tabindex="-1"></a></span>
<span id="cb172-5"><a href="DataGather.html#cb172-5" tabindex="-1"></a><span class="co"># Create a temporary file called &#39;temp&#39; to put the zip file into.</span></span>
<span id="cb172-6"><a href="DataGather.html#cb172-6" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb172-7"><a href="DataGather.html#cb172-7" tabindex="-1"></a></span>
<span id="cb172-8"><a href="DataGather.html#cb172-8" tabindex="-1"></a><span class="co"># # Download the compressed file into the temporary file</span></span>
<span id="cb172-9"><a href="DataGather.html#cb172-9" tabindex="-1"></a><span class="fu">download.file</span>(URL, temp)</span>
<span id="cb172-10"><a href="DataGather.html#cb172-10" tabindex="-1"></a></span>
<span id="cb172-11"><a href="DataGather.html#cb172-11" tabindex="-1"></a><span class="co"># # Decompress the file and convert it into a data frame</span></span>
<span id="cb172-12"><a href="DataGather.html#cb172-12" tabindex="-1"></a>uds_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">gzfile</span>(temp, <span class="st">&quot;uds_summary.csv&quot;</span>))</span>
<span id="cb172-13"><a href="DataGather.html#cb172-13" tabindex="-1"></a></span>
<span id="cb172-14"><a href="DataGather.html#cb172-14" tabindex="-1"></a><span class="co"># # Delete the temporary file</span></span>
<span id="cb172-15"><a href="DataGather.html#cb172-15" tabindex="-1"></a><span class="fu">unlink</span>(temp)</span>
<span id="cb172-16"><a href="DataGather.html#cb172-16" tabindex="-1"></a></span>
<span id="cb172-17"><a href="DataGather.html#cb172-17" tabindex="-1"></a><span class="co"># # Show variables in data</span></span>
<span id="cb172-18"><a href="DataGather.html#cb172-18" tabindex="-1"></a><span class="fu">names</span>(uds_data)</span></code></pre></div>
<p>Note I used <code>paste0()</code> to split the URL over two lines so I could print the whole URL on this page.</p>
</div>
<div id="data-apis-and-feeds" class="section level3 hasAnchor" number="6.3.4">
<h3><span class="header-section-number">6.3.4</span> Data APIs and feeds<a href="DataGather.html#data-apis-and-feeds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a growing number of packages that can gather data directly
from a variety of internet sources and import them into R. Most of these
packages use the sources’ web application programming interfaces (APIs).
Web APIs allow programs to interact with a website. Needless to say,
this is great for reproducible research. It not only makes the data
gathering process easier as you don’t have to download many Excel files
and fiddle around with them before even getting the data into R, but it
also makes replicating the data gathering process much more
straightforward and makes it easy to update data sets when new
information becomes available.</p>
<p><strong>Warning</strong>: An R package that downloads data from an API will only work
as long as the package maintainer keeps up with changes made to the API and the service the API calls still exists. If one of these conditions doesn’t hold, the function call will break. It will not be possible to easily reproduce the data gathering process. Because of these threats to reproducibility, I recommend saving a copy of the data you download and considering making it available for replication.</p>
<div id="api-r-package-example" class="section level4 unnumbered hasAnchor">
<h4>API R package example<a href="DataGather.html#api-r-package-example" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Each of these packages has its own syntax and it isn’t possible to go
over all of them here. Nonetheless, let’s look at an example of
accessing World Bank data with the <em>WDI</em> to give you a sense of how
these packages work. Imagine that we want to gather data on fertilizer
consumption. We can use <em>WDI</em>’s <code>WDIsearch()</code> function to find fertilizer
consumption data available at the World Bank:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="DataGather.html#cb173-1" tabindex="-1"></a><span class="co"># Load WDI package</span></span>
<span id="cb173-2"><a href="DataGather.html#cb173-2" tabindex="-1"></a><span class="fu">library</span>(WDI)</span>
<span id="cb173-3"><a href="DataGather.html#cb173-3" tabindex="-1"></a></span>
<span id="cb173-4"><a href="DataGather.html#cb173-4" tabindex="-1"></a><span class="co"># Search World Bank for fertilizer consumption data</span></span>
<span id="cb173-5"><a href="DataGather.html#cb173-5" tabindex="-1"></a><span class="fu">WDIsearch</span>(<span class="st">&quot;fertilizer consumption&quot;</span>)</span></code></pre></div>
<pre><code>##              indicator
## 1070    AG.CON.FERT.MT
## 1071 AG.CON.FERT.PT.ZS
## 1072    AG.CON.FERT.ZS
##                                                               name
## 1070                          Fertilizer consumption (metric tons)
## 1071           Fertilizer consumption (% of fertilizer production)
## 1072 Fertilizer consumption (kilograms per hectare of arable land)</code></pre>
<p>This call returns a selection of indicator numbers and their names.<a href="#fn138" class="footnote-ref" id="fnref138"><sup>138</sup></a>
Let’s gather data on countries’ fertilizer consumption in kilograms per
hectare of arable land. The indicator number for this variable is:
<code>AG.CON.FERT.ZS</code>. We can use the function <code>WDI()</code> to gather the data and put
it in an object called <em>fert_cons_data</em>.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="DataGather.html#cb175-1" tabindex="-1"></a>fert_cons_data <span class="ot">&lt;-</span> <span class="fu">WDI</span>(<span class="at">indicator =</span> <span class="st">&quot;AG.CON.FERT.ZS&quot;</span>,</span>
<span id="cb175-2"><a href="DataGather.html#cb175-2" tabindex="-1"></a>                      <span class="at">start =</span> <span class="dv">2010</span>, <span class="at">end =</span> <span class="dv">2016</span>)</span></code></pre></div>
<p>The <code>start</code> and <code>end</code> arguments allow us to set the starting and ending year of the data to download.</p>
<p>The data we downloaded looks like this:</p>
<!-- ```{r Ch6WDIFertSave, include=FALSE, eval=FALSE} -->
<!-- # This ensures that the PDF will still compile even if the data is unavailable via WDI -->
<!-- load(file = "Source/Children/Chapter6/FertData.RData") -->
<!-- ``` -->
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="DataGather.html#cb176-1" tabindex="-1"></a><span class="fu">head</span>(fert_cons_data)</span></code></pre></div>
<pre><code>##                       country iso2c iso3c year
## 1 Africa Eastern and Southern    ZH   AFE 2016
## 2 Africa Eastern and Southern    ZH   AFE 2015
## 3 Africa Eastern and Southern    ZH   AFE 2014
## 4 Africa Eastern and Southern    ZH   AFE 2013
## 5 Africa Eastern and Southern    ZH   AFE 2012
## 6 Africa Eastern and Southern    ZH   AFE 2011
##   AG.CON.FERT.ZS
## 1          21.06
## 2          19.23
## 3          19.92
## 4          18.93
## 5          18.45
## 6          21.05</code></pre>
<p>You can see that <code>WDI</code> has downloaded data for four variables:
<strong>iso2c</strong>,<a href="#fn139" class="footnote-ref" id="fnref139"><sup>139</sup></a> <strong>country</strong>, <strong>AG.CON.FERT.ZS</strong> and <strong>year</strong>.</p>
</div>
</div>
</div>
<div id="advanced-automatic-data-gathering-web-scraping" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Advanced Automatic Data Gathering: Web Scraping<a href="DataGather.html#advanced-automatic-data-gathering-web-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If a package does not already exist to access data from a particular
website, there are other ways to automatically “scrape” data with R.
This section briefly discusses some of R’s web scraping tools and
techniques to get you headed in the right direction to do more advanced
data gathering.</p>
<div id="the-general-process" class="section level4 unnumbered hasAnchor">
<h4>The general process<a href="DataGather.html#the-general-process" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Simple web scraping involves downloading a file from the internet,
parsing it (i.e. reading it), and extracting the data you are interested
in then putting it into a data frame object. We already saw a simple
example of this when we downloaded data from a secure HTTPS website.</p>
<p>The complexity of this process depends on how structured the data is. If the data is in a CSV file, then all we need is the <code>import()</code> function. Less structured data requires more effort to download and parse. For example, data
may be stored in an HTML formatted table within a more complicated HTML
marked up webpage. The <em>XML</em> package <span class="citation">(<a href="#ref-R-XML">Temple Lang 2025</a>)</span> has a number of useful
functions such as <code>readHTMLTable()</code> for parsing and extracting this kind of
data. The <em>XML</em> package also clearly has functions for handling XML—Extensible Markup Language—formatted data. In addition, the helpful <em>rvest</em> <span class="citation">(<a href="#ref-R-rvest">Wickham 2022</a>)</span> package
provides set of functions with capabilities similar to
and often more capable than <em>XML</em>. If the data is stored in JSON—JavaScript Object Notation—you can read it with a package like <em>jsonlite</em> <span class="citation">(<a href="#ref-R-jsonlite">Ooms 2023</a>)</span>.</p>
<p>There are more websites with APIs than R packages designed specifically
to access each one. If an API is available, the <em>httr</em> package <span class="citation">(<a href="#ref-R-httr">Wickham 2023</a>)</span>
may be useful.</p>
</div>
<div id="more-tools-to-learn-for-web-scraping" class="section level4 unnumbered hasAnchor">
<h4>More tools to learn for web scraping<a href="DataGather.html#more-tools-to-learn-for-web-scraping" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Beyond learning about the various R packages that are useful for R web
scraping, an aspiring web scraper should probably invest time learning a
number of other skills:</p>
<ul>
<li><p>HTML: Obviously you will encounter a lot of HTML markup when web
scraping. Having a good understanding of the HTML markup language
will be very helpful. W3 Schools (<a href="https://www.w3schools.com/" class="uri">https://www.w3schools.com/</a>) is a
free resource for learning HTML as well as JSON, JavaScript, XML,
and other languages you will likely come across while web scraping.</p></li>
<li><p>Regular Expressions: Web scraping often involves finding character
patterns. Some of this is done for you by the R packages above that
parse text. There are times, however, when you are looking for
particular patterns, like tag IDs, that are particular to a given
website and change across the site based on a particular pattern.
You can use regular expressions to deal with these situations. R has
a comprehensive, if bare-bones, introduction to regular expressions.
To access it, type <code>?regex</code> into your R console.</p></li>
<li><p>Looping: Web scraping often involves applying a function to multiple
things, e.g. tables or HTML tags. To do this in an efficient way, you
will need to use loops and <code>apply</code> functions. <span class="citation">Matloff (<a href="#ref-matloff2011">2011</a>)</span> provides
a comprehensive overview. The <em>dplyr</em> <span class="citation">(<a href="#ref-R-dplyr">Wickham et al. 2023</a>)</span> and <em>purrr</em> <span class="citation">(<a href="#ref-R-purrr">Wickham and Henry 2023</a>)</span> packages are useful for data frame and vector manipulation.</p></li>
<li><p>Finally, <span class="citation">Munzert et al. (<a href="#ref-munzert2015">2015</a>)</span> provide a comprehensive overview of web
scraping and text mining with R.</p></li>
</ul>
</div>
<div id="chapter-summary-3" class="section level3 unnumbered hasAnchor">
<h3>Chapter summary<a href="DataGather.html#chapter-summary-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this chapter, we learned how to reproducibly gather data from a
number of sources. If the data we are using is available online, we may
be able to create really reproducible data gathering files. These files
have commands that others can execute with makefiles that allow them to
actually regather the exact data we used. The techniques we can use to
gather online data also make it easy to update our data when new
information becomes available. Of course, it may not always be possible
to have really reproducible data gathering. Nonetheless, you should
always aim to make it clear to others (and yourself) how you gathered
your data. In the next chapter, we will learn how to clean and merge
multiple data files so that they can easily be used in our statistical
analyses.</p>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-buckheit1995" class="csl-entry">
Buckheit, Jonathan B., and David L. Donoho. 1995. <span>“Wavelab and Reproducible Research.”</span> In <em>Wavelets and Statistics</em>, edited by A. Antoniadis, 55–81. New York: Springer.
</div>
<div id="ref-fomel2009" class="csl-entry">
Fomel, Sergey, and Jon F Claerbout. 2009. <span>“<span>Reproducible Research</span>.”</span> <em>Computing in Science <span>&amp;</span> Engineering</em> 11 (1): 5–7.
</div>
<div id="ref-frazier2008" class="csl-entry">
Frazier, Mitch. 2008. <span>“Bash Parameter Expansion.”</span> <em>The Linux Journal</em>.
</div>
<div id="ref-matloff2011" class="csl-entry">
Matloff, Norman. 2011. <em>The Art of Programming in r: A Tour of Statistical Programming Design</em>. San Francisco: No Starch Press.
</div>
<div id="ref-munzert2015" class="csl-entry">
Munzert, Simon, Christian Rubba, Peter Meißner, and Dominic Nyhuis. 2015. <em>Automated Data Collection with r: A Practical Guide to Web Scraping and Text Mining</em>. Chichester: Wiley.
</div>
<div id="ref-R-jsonlite" class="csl-entry">
Ooms, Jeroen. 2023. <em>Jsonlite: A Simple and Robust JSON Parser and Generator for r</em>. <a href="https://jeroen.r-universe.dev/jsonlite
https://arxiv.org/abs/1403.2805">https://jeroen.r-universe.dev/jsonlite
<div id="ref-pemstein2010" class="csl-entry">
Pemstein, Daniel, Stephen A. Meserve, and James Melton. 2010. <span>“Democratic Compromise: A Latent Variable Analysis of Ten Measures of Regime Type.”</span> <em>Political Analysis</em> 18 (4): 426–49.
</div>
<div id="ref-R-XML" class="csl-entry">
Temple Lang, Duncan. 2025. <em>XML: Tools for Parsing and Generating XML Within r and s-Plus</em>. <a href="https://www.omegahat.net/RSXML/">https://www.omegahat.net/RSXML/</a>.
</div>
<div id="ref-R-rvest" class="csl-entry">
———. 2022. <em>Rvest: Easily Harvest (Scrape) Web Pages</em>. <a href="https://CRAN.R-project.org/package=rvest">https://CRAN.R-project.org/package=rvest</a>.
</div>
<div id="ref-R-httr" class="csl-entry">
———. 2023. <em>Httr: Tools for Working with URLs and HTTP</em>. <a href="https://CRAN.R-project.org/package=httr">https://CRAN.R-project.org/package=httr</a>.
</div>
<div id="ref-R-dplyr" class="csl-entry">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-R-purrr" class="csl-entry">
Wickham, Hadley, and Lionel Henry. 2023. <em>Purrr: Functional Programming Tools</em>. <a href="https://CRAN.R-project.org/package=purrr">https://CRAN.R-project.org/package=purrr</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="119">
<li id="fn119"><p>GNU stands for “GNU’s Not Unix”, indicating that it is Unix-like.<a href="DataGather.html#fnref119" class="footnote-back">↩︎</a></p></li>
<li id="fn120"><p>To standardize things, I use the terms “R make-like file” for
files created and run in R and the standard “makefile” for files run
by Make.<a href="DataGather.html#fnref120" class="footnote-back">↩︎</a></p></li>
<li id="fn121"><p>We use the command more in Chapter <a href="StatsModel.html#StatsModel">8</a>.<a href="DataGather.html#fnref121" class="footnote-back">↩︎</a></p></li>
<li id="fn122"><p>GNU Make was originally developed in 1977 by Stuart Feldman as a
way to compile computer programs from a series of files, its primary
use to this day. For an overview, see
<a href="http://en.wikipedia.org/wiki/Make_(software)" class="uri">http://en.wikipedia.org/wiki/Make_(software)</a>. For installation
instructions, please see Section <a href="Intro.html#InstallMake">1.5.2</a>.<a href="DataGather.html#fnref122" class="footnote-back">↩︎</a></p></li>
<li id="fn123"><p>A file’s time stamp records the time and date when it was last
changed.<a href="DataGather.html#fnref123" class="footnote-back">↩︎</a></p></li>
<li id="fn124"><p>Alternatively, you can call the file <em>GNUmakefile</em> or <em>makefile</em>.<a href="DataGather.html#fnref124" class="footnote-back">↩︎</a></p></li>
<li id="fn125"><p>Simple string variables are often referred to as “macros” in GNU
Make. A common convention in Make and Unix-like shells generally is
to use all caps for variable names.<a href="DataGather.html#fnref125" class="footnote-back">↩︎</a></p></li>
<li id="fn126"><p>This is a kind of parameter expansion. For more information about
parameter expansion, see <span class="citation">Frazier (<a href="#ref-frazier2008">2008</a>)</span>.<a href="DataGather.html#fnref126" class="footnote-back">↩︎</a></p></li>
<li id="fn127"><p>Braces (<code>{}</code>) are also sometimes used for this.<a href="DataGather.html#fnref127" class="footnote-back">↩︎</a></p></li>
<li id="fn128"><p>The R out-file contains all of the output from the R session used
while running the file. These can be a helpful place to look for
errors if your makefiles give you an error like
<code>make: *** [gather.Rout] Error 1</code>.<a href="DataGather.html#fnref128" class="footnote-back">↩︎</a></p></li>
<li id="fn129"><p>You will need to make sure that R is in your PATH. Setting this
up is different on different systems. If on Mac and Linux you can
load R from the Terminal by typing <code>R</code>, R is in your PATH. The
R installation usually sets this up correctly. There are different
methods for changing the file path on different versions of Windows.<a href="DataGather.html#fnref129" class="footnote-back">↩︎</a></p></li>
<li id="fn130"><p>If you open these files, you will find the output from the R
session used when their source file was last run.<a href="DataGather.html#fnref130" class="footnote-back">↩︎</a></p></li>
<li id="fn131"><p>If a project doesn’t have a makefile, you can still set up RStudio
Build. Click on <code>Build</code> in the Menu bar then
<code>Configure Build Tools . . .</code>. Select <code>Makefile</code> from the drop-down
menu, then <code>Ok</code>. You will still need to manually add a Makefile in
the Project’s root directory.<a href="DataGather.html#fnref131" class="footnote-back">↩︎</a></p></li>
<li id="fn132"><p>See his blog at:
<a href="https://robjhyndman.com/hyndsight/makefiles/" class="uri">https://robjhyndman.com/hyndsight/makefiles/</a>, which was posted 31 October
2012. This method largely replicates what we do in this book with
<em>knitr</em>. Nonetheless, it has helpful information about Make that can
be used in other tasks. It was in fact helpful for writing this
section of the book.<a href="DataGather.html#fnref132" class="footnote-back">↩︎</a></p></li>
<li id="fn133"><p>URL stands for “Uniform Resource Locator”.<a href="DataGather.html#fnref133" class="footnote-back">↩︎</a></p></li>
<li id="fn134"><p>Tar archives are sometimes referred to as ‘tar balls’.<a href="DataGather.html#fnref134" class="footnote-back">↩︎</a></p></li>
<li id="fn135"><p>Some formats that require the <em>foreign</em> package to open are more
difficult. This is because functions such as for opening Stata files
only accept file names or URLs as arguments, not connections, which
you create for unzipped files.<a href="DataGather.html#fnref135" class="footnote-back">↩︎</a></p></li>
<li id="fn136"><p>The description of this process is based on a Stack Overflow
comment by Dirk Eddelbuettel (see
<a href="http://stackoverflow.com/questions/3053833/using-r-to-download-zipped-data-file-extract-and-import-data?answertab=votes#tab-top" class="uri">http://stackoverflow.com/questions/3053833/using-r-to-download-zipped-data-file-extract-and-import-data?answertab=votes#tab-top</a>,
posted 10 June 2010.)<a href="DataGather.html#fnref136" class="footnote-back">↩︎</a></p></li>
<li id="fn137"><p>To find a full list of functions, type <code>?connections</code> into the R console.<a href="DataGather.html#fnref137" class="footnote-back">↩︎</a></p></li>
<li id="fn138"><p>You can also search the World Bank Development Indicators
website. The indicator numbers are at the end of each indicator’s
URL.<a href="DataGather.html#fnref138" class="footnote-back">↩︎</a></p></li>
<li id="fn139"><p>These are the countries’ or regions’ International Standards
Organization’s two-letter codes. For more details, see
<a href="https://www.iso.org/iso-3166-country-codes.html" class="uri">https://www.iso.org/iso-3166-country-codes.html</a>.<a href="DataGather.html#fnref139" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Storing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="DataClean.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/yihui/bookdown-crc/edit/master/08-gather.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["bookdown.pdf", "bookdown.epub"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "none"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
